<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ticket</title>
    <style>
        /* [Previous styles remain the same] */
        .items td {
            padding: 2px 10px 2px 2px; /* Añadido padding derecho para alinear números */
        }
        .items td:nth-child(1),
        .items td:nth-child(3),
        .items td:nth-child(4) {
            text-align: right; /* Alinear números a la derecha */
        }
    </style>
</head>
<body>
    <div class="ticket">
        <!-- [Previous HTML structure remains the same until the script] -->
        <table class="items">
            <tr>
                <th style="text-align: right">Cant</th>
                <th style="text-align: left">Descripcion</th>
                <th style="text-align: right">Precio</th>
                <th style="text-align: right">Total</th>
            </tr>
            <tbody id="items-container"></tbody>
        </table>
        <!-- [Rest of the HTML remains the same] -->
    </div>

    <script>
        const params = new URLSearchParams(window.location.search);
        
        document.getElementById('phone').textContent = '502 2363-2036 / 502 4183-1220';
        document.getElementById('ticket').textContent = params.get('boleta');
        document.getElementById('customer').textContent = params.get('mesa');
        document.getElementById('date').textContent = params.get('fecha') || 'FECHA DE RECEPCION: 12/30/2024 16:35:49';
        
        function getNumericPrice(price) {
            if (!price) return 0;
            return parseFloat(price.replace('Q', '').replace(/\s/g, '')) || 0;
        }

        const cantidades = (params.get('cantidades') || '').split(',');
        const servicios = (params.get('servicios') || '').split(',');
        const precios = (params.get('p_unit') || '').split(',');
        
        const itemsContainer = document.getElementById('items-container');
        
        cantidades.forEach((cantidad, i) => {
            if (cantidad.trim()) {
                const cantidadNum = parseInt(cantidad.trim());
                const precioNum = getNumericPrice(precios[i]);
                const total = cantidadNum * precioNum;

                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${cantidad.trim()}</td>
                    <td>${servicios[i] ? servicios[i].trim() : ''}</td>
                    <td>${precios[i] ? precios[i].trim() : ''}</td>
                    <td>Q${total.toFixed(1)}</td>
                `;
                itemsContainer.appendChild(row);
            }
        });

        document.getElementById('cash').textContent = params.get('efectivo');
        document.getElementById('total').textContent = params.get('total');
        document.getElementById('change').textContent = params.get('devueltas');
    </script>
</body>
</html>
